import { HoverContainer,CodeWithTooltips } from '../../components/mdx/code'
import { Callout } from '../../components/mdx'

export const metadata = {
  pinned: false,
  title: 'ê¹ƒí—ˆë¸Œ ë¸”ë¡œê·¸ ì œì‘ ê¸°ë¡ (1)',
  description: 'Next.js 15(App Router)ê³¼ Tailwind CSS v4, MDXë¥¼ ì´ìš©í•´ GitHub Pagesì— ì •ì  ë¸”ë¡œê·¸ë¥¼ ë§Œë“¤ì—ˆì–´ìš”.\nì„¤ì •ê³¼ êµ¬ì¡°ë¥¼ ê¸°ë¡ìœ¼ë¡œ ë‚¨ê¸°ê¸° ìœ„í•´ ê¸€ì„ ì‘ì„±í–ˆì–´ìš”.',
  publishDate: "2025-07-10T22:09:44Z",
  image: 'https://github.githubassets.com/assets/GitHub-Mark-ea2971cee799.png',
  tags: [
    'React', 'Next.js', "Github"
  ],
};

---
<Callout type="tip">
ì´ ê¸€ì€ **ê°€ì´ë“œê°€ ì•„ë‹Œ ì œì‘ ê¸°ë¡**ì´ì—ìš”. ì°¸ê³ í•˜ë˜, ìƒëµëœ ë¶€ë¶„ì´ ìˆì„ ìˆ˜ ìˆì–´ìš”.
</Callout>

---
# 0. ì°¸ê³ í•œ ë¸”ë¡œê·¸
- [@next/mdxë¡œ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° (App router)](https://www.leehyeonjun.com/blog/next_mdx_blog)
- [Next.jsë¡œ ë¸”ë¡œê·¸ ë§Œë“¤ê¸°](https://bepyan.github.io/blog/nextjs-blog)
- [NextJSë¡œ ë¸”ë¡œê·¸ë¥¼ ë§Œë“¤ì–´ë³´ì](https://velog.io/@minsang9735/NextJS%EB%A1%9C-%EB%B8%94%EB%A1%9C%EA%B7%B8%EB%A5%BC-%EB%A7%8C%EB%93%A4%EC%96%B4%EB%B3%B4%EC%9E%90#%EC%99%9C-%EB%A7%8C%EB%93%AC)
- [Next.js ë¸”ë¡œê·¸ ë§Œë“¤ê¸° (14.1 ìµœì‹  ë²„ì „ + tailwind)](https://d5br5.dev/blog/nextjs_blog/setup)
- [Next.jsë¡œ ë‚˜ë§Œì˜ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° with ì •ì  ìƒì„±](https://miryang.dev/blog/build-blog-with-nextjs)

---
# 1. GitHub Pages ë¸”ë¡œê·¸ ê¸°ë³¸ ì„¸íŒ…
ìì„¸í•œ ë‚´ìš©ì€ [GitHub Pages ë¹ ë¥¸ ì‹œì‘ ê°€ì´ë“œ](https://docs.github.com/ko/pages/quickstart)ë¥¼ í™•ì¸í•´ ì£¼ì„¸ìš”.

## Actions ê¶Œí•œ ì„¤ì •
ì €ëŠ” `GitHub Actions`ë¥¼ í†µí•´ ë°°í¬í•˜ê¸° ìœ„í•´ Action ê¶Œí•œì„ ì„¤ì •í•´ ì¤¬ì–´ìš”.
`Settings â†’ Actions â†’ General`ì—ì„œ `Workflow permmisions`ì„ **Read and Write**ë¡œ ì„¤ì •í•´ìš”.
![image](https://blog.kakaocdn.net/dna/0ztSK/btsPdMEGh8y/AAAAAAAAAAAAAAAAAAAAAO06jcnticO52gSE3HdyL7lv85PBAqCkcqXMB8-xA_oL/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&expires=1753973999&allow_ip=&allow_referer=&signature=kZzQd9lR6Vis1m9a2jICmeayR98%3D)

---
# 2. Next.js í”„ë¡œì íŠ¸ ì´ˆê¸°í™”
## í”„ë¡œì íŠ¸ ìƒì„±
```bash
npx create-next-app@latest .
```

## MDX ì„¤ì •
```bash
npm install @next/mdx @mdx-js/loader @mdx-js/react
npm install -D @types/mdx
```

### next.config.ts ì„¤ì •
<HoverContainer>
[withMDX](hover:one) ì„¤ì •ê³¼ í•¨ê»˜ [output: 'export' ì˜µì…˜](hover:two)ë„ ì„¤ì •í•´ìš”.

```ts next.config.ts
import nextMDX from '@next/mdx';
import { NextConfig } from 'next';

/** @type {import('next').NextConfig} */
const nextConfig: NextConfig = {
  // !hover two
  output: 'export',

  pageExtensions: ['js', 'jsx', 'md', 'mdx', 'ts', 'tsx'],
  reactStrictMode: true,
}

// !hover one
const withMDX = nextMDX({
  // !hover one
  extension: /\.mdx?$/,
  // !hover one
  options: {
    // !hover one
    remarkPlugins: [],
    // !hover one
    rehypePlugins: [],
  // !hover one
  },
// !hover one
});

export default withMDX(nextConfig);
```
</HoverContainer>

### MDX ì»´í¬ë„ŒíŠ¸ ë°”ì¸ë”©
<Callout type="error">
`App Router`ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš°, `mdx.components.tsx`ê°€ ì—†ìœ¼ë©´ MDXê°€ ì‘ë™í•˜ì§€ ì•Šì•„ìš”.
</Callout>

```tsx src/mdx-components.tsx
import type { MDXComponents } from 'mdx/types';

export function useMDXComponents(components: MDXComponents): MDXComponents {
  return {
    ...components,
  };
}
```

---
# 3. ë¸”ë¡œê·¸ ê¸€ ì‘ì„± êµ¬ì¡°
## ì‘ì„± ìœ„ì¹˜
ëª¨ë“  ê¸€ì€ `src/posts/ì¹´í…Œê³ ë¦¬/íŒŒì¼.mdx` í˜•ì‹ìœ¼ë¡œ ì €ì¥í•´ìš”.

## ë©”íƒ€ë°ì´í„° í˜•ì‹
```mdx
export const metadata = {
  title: 'ì œëª©',
  description: 'ì„¤ëª…',
  publishDate: "2025-07-12T00:00:00Z",
  image: 'ì´ë¯¸ì§€ ì£¼ì†Œ',
  tags: ['íƒœê·¸ë“¤'],
}

```

### VS Code ìŠ¤ë‹ˆí« ë“±ë¡
MDX ë©”íƒ€ë°ì´í„° ì‘ì„±ì„ ë¹ ë¥´ê²Œ í•˜ê¸° ìœ„í•´ ìŠ¤ë‹ˆí«ì„ ë“±ë¡í•´ ë‘ë©´ í¸ë¦¬í•´ìš”.
`mdxmeta`ë§Œ ì‘ì„±í•´ë„ í‹€ì´ ë§Œë“¤ì–´ì ¸ìš”.

```json .vscode/mdx.code-snippets
{
  "MDX Metadata": {
    "prefix": ["mdxmeta", "mdxmetadata"],
    "description": "Insert metadata object for MDX page",
    "body": [
      "",
      "export const metadata = {",
      "  title: '$1',",
      "  description: '$2',",
      "  publishDate: \"${CURRENT_YEAR}-${CURRENT_MONTH}-${CURRENT_DATE}T${CURRENT_HOUR}:${CURRENT_MINUTE}:${CURRENT_SECOND}Z\",",
      "  image: '$3',",
      "  tags: [",
      "    '$4'",
      "  ],",
      "};",
      "",
      "$0",
    ],
    "scope": "mdx",
  },
}
```

---
# 4. ê¸€ ëª©ë¡ ë¶ˆëŸ¬ì˜¤ê¸°
## ëª¨ë“  .mdx íŒŒì¼ ê²½ë¡œ ìˆ˜ì§‘
```ts src/libs/posts.ts
// !link[/process.cwd\(\)/] https://r2.nodejs.org/docs/v8.5.0/api/process.html#process_process_cwd
const postsPath = path.resolve(process.cwd(), 'src', 'posts')

export const getAllFiles = async (dir: string): Promise<string[]> => {
  // !callout[/withFileTypes: true/] ì´ ì˜µì…˜ìœ¼ë¡œ Dirent ê°ì²´ë¥¼ ë°›ì•„ì„œ íŒŒì¼ì¸ì§€ í´ë”ì¸ì§€ ë°”ë¡œ íŒë³„í•  ìˆ˜ ìˆì–´ìš”.
  const dirents = await readdir(dir, { withFileTypes: true })
  const files = await Promise.all(
    dirents.map((dirent) => {
      const res = path.resolve(dir, dirent.name)
      return dirent.isDirectory() ? getAllFiles(res) : res
    }),
  )

  return Array.prototype.concat(...files)
}
```

## ì „ì²´ ê²Œì‹œ ê¸€ ëª©ë¡
<HoverContainer>
íŒŒì¼ì€ [slugs](hover:one)ë¥¼ ë§Œë“¤ì–´ì„œ ê²Œì‹œ ê¸€ì„ ê´€ë¦¬í•´ìš”. ë§Œì•½ `src/posts/test/first.mdx` íŒŒì¼ì´ë¼ë©´ **slug**ëŠ” `test/first`ê°€ ë¼ìš”.

```ts src/libs/posts.ts
export const sortByDateDesc = <T extends { metadata: { publishDate?: string } }>(a: T, b: T) =>
  new Date(b.metadata.publishDate ?? 0).getTime() - new Date(a.metadata.publishDate ?? 0).getTime()

export const getAllPosts = async (): Promise<PostSummary[]> => {
  const files = (await getAllFiles(postsPath)).filter((f) =>
    f.endsWith('.mdx'),
  )

  // !mark(1:3)
  // !hover one
  const slugs = files
    // !hover one
    .map((file) =>path.relative(postsPath, file).slice(0, -4),)
    // !hover one
    .map((slug) => slug.replace(/\\/g, '/'))

  const posts = await Promise.all(
    // !callout[/getPost/] ì´ í•¨ìˆ˜ëŠ” `4. ê²Œì‹œ ê¸€ ë¶ˆëŸ¬ì˜¤ê¸°`ì— ìˆì–´ìš”
    slugs.map((slug) => getPost(slug, true)),
  )

  return (posts as PostSummary[]).sort(sortByDateDesc)
}
```
</HoverContainer>
![image](https://blog.kakaocdn.net/dna/nmPmz/btsPfJIxMtl/AAAAAAAAAAAAAAAAAAAAAGl32oZFMR590YLmvW86cCrvEEoXQpg6er2i17_K3Sxy/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&expires=1753973999&allow_ip=&allow_referer=&signature=wColNktC9lkvihXC%2B3YIGk6JwRE%3D)

## ì¹´í…Œê³ ë¦¬ë³„ ê²Œì‹œ ê¸€ ëª©ë¡
```ts src/libs/posts.ts
const filterPosts = async (predicate: (post: PostSummary) => boolean): Promise<PostSummary[]> => {
  const posts = await getAllPosts()
  return posts.filter(predicate).sort(sortByDateDesc)
}

export const getPostsByCategory = (category: string) =>
  filterPosts((post) => post.metadata.category === category)
```
![image](https://blog.kakaocdn.net/dna/bswvJ3/btsPfZEpfmx/AAAAAAAAAAAAAAAAAAAAABkmUbrZzDy9SFpaKKYQdu657SGbozbJYZVMk_Mz7eLG/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&expires=1753973999&allow_ip=&allow_referer=&signature=3bndIXzgAszg8MWycvSsTmAOGJQ%3D)

---
# 5. ê²Œì‹œ ê¸€ ë¶ˆëŸ¬ì˜¤ê¸°
## Tailwind Typography ì„¤ì •
MDXê°€ htmlë¡œ íŒŒì‹±ë˜ë‹ˆ, [Tailwind Typography](https://github.com/tailwindlabs/tailwindcss-typography)ë¥¼ í†µí•´ ë³´ì—¬ ì¤„ ê±°ì˜ˆìš”.

```bash
npm install -D @tailwindcss/typography
```

ì„¤ì¹˜í•œ ë’¤ì—ëŠ” cssì— í”ŒëŸ¬ê·¸ì¸ì„ ì¶”ê°€í•´ì•¼ í•´ìš”.
```css src/app/globals.css
  @import "tailwindcss";
  /* !diff + */
  @plugin "@tailwindcss/typography";
```

ì‚¬ìš©ì€ classNameì— `prose`ë¥¼ ì¶”ê°€í•˜ë©´ ë¼ìš”.
```tsx
<div className="prose">
  <Component />
</div>
```

## ê²Œì‹œ ê¸€ í˜ì´ì§€
<HoverContainer>
- [generateStaticParams](hover:one) [ìì„¸íˆ](https://nextjs.org/docs/app/api-reference/functions/generate-static-params) 
  ë¹Œë“œ ì‹œì ì— ì–´ë–¤ ë™ì  ê²½ë¡œë¥¼ ë¯¸ë¦¬ ìƒì„±í• ì§€ **Next.js**ì— ì•Œë ¤ ì£¼ëŠ” ì—­í• ì„ í•´ìš”.
  ì˜ˆë¥¼ ë“¤ì–´ `app/blog/[slug]/page.tsx` ê°™ì€ ë™ì  ì„¸ê·¸ë¨¼íŠ¸ê°€ ìˆì„ ë•Œ, ì´ í•¨ìˆ˜ê°€ ë°˜í™˜í•œ params ëª©ë¡ëŒ€ë¡œ ê°ê°ì˜ HTMLì„ ì •ì ìœ¼ë¡œ ìƒì„±í•´ ë‘ë¯€ë¡œ **í˜ì´ì§€ ë¡œë”© ì†ë„ê°€ ë¹¨ë¼ì§€ê³  ì„œë²„ ìš”ì²­ ì—†ì´ë„ ì½˜í…ì¸ ë¥¼ ì œê³µ**í•  ìˆ˜ ìˆì–´ìš”.

- [generateMetadata](hover:two) [ìì„¸íˆ](https://nextjs.org/docs/app/api-reference/functions/generate-metadata)
  ë™ì  ê²½ë¡œì— ë§ì¶˜ `<head>` ë©”íƒ€ë°ì´í„°ë¥¼ ì„œë²„ ì»´í¬ë„ŒíŠ¸ ì°¨ì›ì—ì„œ ë™ì ìœ¼ë¡œ ìƒì„±í•˜ê¸° ìœ„í•´ ì‚¬ìš©ë¼ìš”.
  ë¹Œë“œ ì‹œ ê³ ì •ëœ `export const metadata` ëŒ€ì‹ , ì´ í•¨ìˆ˜ ë‚´ì—ì„œ `params`ë¥¼ í†µí•´ ìŠ¬ëŸ¬ê·¸ë¥¼ ë°›ê³  ì™¸ë¶€ APIë‚˜ íŒŒì¼ì—ì„œ ì œëª©Â·ì„¤ëª… ë“±ì„ ê°€ì ¸ì™€ ë°˜í™˜í•¨ìœ¼ë¡œì¨, **SEO ìµœì í™” ë° ì†Œì…œ ê³µìœ  íƒœê·¸ë¥¼ í˜ì´ì§€ë³„ë¡œ ë§ì¶¤ ì„¤ì •**í•  ìˆ˜ ìˆì–´ìš”.

```tsx src/app/category/[category]/page.tsx
import React from 'react'

import { getPost, getSlugs } from '@/libs/posts'

interface ParamsProps {
  params: Promise<{ category: string; slug: string }>
}

// !collapse(1:7) collapsed
// !hover one
export async function generateStaticParams() {
  // !hover one
  const categories = await getCategories()

  // !hover one
  return rawSlugs.map((fullSlug) => {
    // !hover one
    const [category, slug] = fullSlug.split(/[\\/]/)
    // !hover one
    return { category, slug }
  // !hover one
  }))
// !hover one
}

// !collapse(1:13) collapsed
// !hover two
export async function generateMetadata({ params }: ParamsProps) {
  // !hover two
  const { category, slug } = await params
  // !hover two
  const fullSlug = `${category}/${slug}`
  // !hover two
  const { metadata } = await getPost(fullSlug)

  // !hover two
  if (!metadata) {
    // !hover two
    return { title: 'Post Not Found' }
  // !hover two
  }

  // !hover two
  return {
    // !hover two
    title: metadata.title,
    // !hover two
    description: metadata.description,
  // !hover two
  }
// !hover two
}

const BlogPage = async ({ params }: ParamsProps) => {
  const { category, slug } = await params
  const fullSlug = `${category}/${slug}`
  const post = await getPost(fullSlug)

  if (!('Component' in post)) {
    return <div>í¬ìŠ¤íŠ¸ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</div>
  }

  const { Component } = post

  return (
    // !mark(1:3)
    <div className="prose dark:prose-invert my-24 max-w-none">
      <Component />
    </div>
  )
}

export default BlogPage
```
</HoverContainer>

---
# 6. Github Actionsë¡œ ë°°í¬í•˜ê¸°
ì•„ë˜ íŒŒì¼ì„ ì¶”ê°€í•œ í›„ ì»¤ë°‹í•˜ë©´ ë¼ìš”.
```yml .github/workflows/main.yml
name: GitHub Pages Deploy

on:
  push:
    branches:
      - main

jobs:
  build-and-deploy:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout ğŸ›ï¸
        uses: actions/checkout@v3

      - name: Install and Build ğŸ”§
        run: |
          npm install
          npm run build && touch ./out/.nojekyll

      - name: Deploy ğŸš€
        uses: JamesIves/github-pages-deploy-action@v4
        with:
          branch: gh-pages
          folder: out
```

---
# 7. ë§ˆë¬´ë¦¬
ì—¬ê¸°ê¹Œì§€ ì„¤ì •ì„ ë§ˆì¹˜ë©´
- `.mdx` íŒŒì¼ì„ ê¸°ë°˜ìœ¼ë¡œ ê¸€ì„ ì‘ì„±í•  ìˆ˜ ìˆì–´ìš”
- ì „ì²´ ê¸€ì„ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ìˆì–´ìš”.
- ì¹´í…Œê³ ë¦¬ë³„ë¡œ ê¸€ì„ ë¶„ë¦¬í•´ì„œ ë³¼ ìˆ˜ ìˆì–´ìš”.
- Github Pageì— ì •ì  ë¸”ë¡œê·¸ë¥¼ ë°°í¬í•  ìˆ˜ ìˆì–´ìš”.